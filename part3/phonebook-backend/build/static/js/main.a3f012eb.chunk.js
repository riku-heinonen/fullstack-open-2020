(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},16:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);t(16);var a=t(2),r=t(0),u=t.n(r),c=function(e){var n=e.handleSubmit,t=e.newName,a=e.newNumber,r=e.handleNameChange,c=e.handleNumberChange;return u.a.createElement("div",null,u.a.createElement("form",{onSubmit:n},u.a.createElement("div",null,"name:",u.a.createElement("input",{value:t,onChange:r})),u.a.createElement("div",null,"number:",u.a.createElement("input",{value:a,onChange:c})),u.a.createElement("div",null,u.a.createElement("button",{type:"submit"},"add"))))},o=function(e){var n=e.string,t=e.handleChange;return u.a.createElement("div",null,"Filter by name",u.a.createElement("input",{value:n,onChange:t}))},l=t(4),i={background:"lightgrey",font:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",margin:"10px"},m=Object(l.a)({color:"red"},i),s=Object(l.a)({color:"green"},i),d=function(e){var n=e.message,t=e.type;return null===n?null:u.a.createElement("div",{style:"success"===t?s:m},n)},f=function(e){var n=e.person,t=e.deletePerson;return u.a.createElement("p",null,n.name," ",n.number," ",u.a.createElement("button",{onClick:function(){window.confirm("Delete ".concat(n.name,"?"))&&t(n.id)}},"Delete"))},h=function(e){var n=e.people,t=e.deletePerson;return u.a.createElement("div",null,u.a.createElement("div",null,n.map((function(e){return u.a.createElement(f,{key:e.name,person:e,deletePerson:t})}))," "))},p=t(3),b=t.n(p),g="/api/persons",v=function(){return b.a.get(g).then((function(e){return e.data}))},E=function(e){return b.a.post(g,e).then((function(e){return e.data}))},y=function(e){return b.a.delete("".concat(g,"/").concat(e)).then((function(e){return e.data}))},w=function(e,n){return b.a.put("".concat(g,"/").concat(e),n).then((function(e){return e.data}))},j=function(){var e=Object(r.useState)([]),n=Object(a.a)(e,2),t=n[0],l=n[1],i=Object(r.useState)(""),m=Object(a.a)(i,2),s=m[0],f=m[1],p=Object(r.useState)(""),b=Object(a.a)(p,2),g=b[0],j=b[1],C=Object(r.useState)(""),O=Object(a.a)(C,2),k=O[0],N=O[1],S=Object(r.useState)({message:null,type:null}),x=Object(a.a)(S,2),P=x[0],D=x[1];Object(r.useEffect)((function(){v().then((function(e){return l(e)}))}),[]);var A=function(e){D({message:e,type:"success"}),setTimeout((function(){D({message:null,type:null})}),3e3)},J=function(e){D({message:e,type:"error"}),setTimeout((function(){D({message:null,type:null})}),3e3)},L=g?t.filter((function(e){return e.name.toLowerCase().includes(g.toLowerCase())})):t;return u.a.createElement("div",null,u.a.createElement(d,{message:P.message,type:P.type}),u.a.createElement("h2",null,"Phonebook"),u.a.createElement(o,{string:g,handleChange:function(e){return j(e.target.value)}}),u.a.createElement("h2",null,"Add a new contact"),u.a.createElement(c,{handleSubmit:function(e){e.preventDefault();var n={name:s,number:k};if(t.map((function(e){return e.name})).includes(s)){if(window.confirm("".concat(s," is already added to to the phonebook, replace the old number with a new one?"))){var a=t.find((function(e){return e.name===s})).id;w(a,n).then((function(e){l(t.map((function(n){return n.id===a?e:n}))),A("Changed number of ".concat(s))})).catch((function(e){J("".concat(s," has already been removed from server")),v().then((function(e){return l(e)}))}))}}else E(n).then((function(e){console.log(e),l(t.concat(e)),A("Added ".concat(s)),f(""),N("")})).catch((function(e){J(e.response.data.error)}))},newName:s,newNumber:k,handleNameChange:function(e){return f(e.target.value)},handleNumberChange:function(e){return N(e.target.value)}}),u.a.createElement("h2",null," Numbers "),u.a.createElement(h,{people:L,deletePerson:function(e){var n=t.find((function(n){return n.id===e})).name;y(e).then((function(a){console.log(a),l(t.filter((function(n){return n.id!==e}))),A("Deleted ".concat(n))})).catch((function(e){J("".concat(n," has already been removed from server")),v().then((function(e){return l(e)}))}))}}))},C=t(14);t.n(C).a.render(u.a.createElement(j,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.a3f012eb.chunk.js.map